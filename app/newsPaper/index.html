<!DOCTYPE html>
<html lang="pt-br">
<head>
    <title>GazetaAcácio - NewsPaper</title>

    <!-- | Require_Meta_Tags | -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- | Import Bootstrap (CDN) | -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>

    <!-- | Import Jquery (CDN) | -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>

    <!-- | Style_Sheets | -->
    <link rel="stylesheet" href="./css/app.css">
    <link rel="stylesheet" href="../components/css/fonts.css">
    <link rel="stylesheet" href="../components/css/app.css">

    <!-- | -- Import Sweetalert2 -- | -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- | -- Import / Exports files Javascript Modules -- | -->


    <!-- | -- Import Javascripts -- | -->
    
</head>
<body>

    <header>
        <nav class="navbar colorBlueMarista navbar-dark bg-dark"> <!-- Caso prefira fixada add "fixed-top" nas classes--> 
        <div class="container-fluid px-5">
          <div class="navbar-brand logoMarista">
              <img src="../components/images/jornal-marista.svg" class="imgLogoPage">
          </div>
          <div class="containerButtonsHeader">
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar" aria-controls="offcanvasDarkNavbar">
              <span class="navbar-toggler-icon"></span>
            </button>
          </div>
          <div class="offcanvas offcanvas-end text-bg-dark colorBlueMarista" tabindex="-1" id="offcanvasDarkNavbar" aria-labelledby="offcanvasDarkNavbarLabel">
            <div class="offcanvas-header">
              <h2 class="offcanvas-title" id="offcanvasDarkNavbarLabel">Categorias</h2>
              <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
              <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                <li class="nav-item">
                  <a class="nav-link fs-5" aria-current="page" href="">
                    <i class="bi bi-activity"></i>
                    Saúde
                </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link fs-5" href="#">
                    <i class="bi bi-controller"></i>
                    Entretenimento
                </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link fs-5" href="#">
                    <i class="bi bi-scooter"></i>
                    Esportes
                </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link fs-5" href="#">
                    <i class="bi bi-calendar-heart"></i>
                    Vida
                </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link fs-5" href="#">
                    <i class="bi bi-people"></i>
                    Política
                </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link fs-5" href="#">
                    <i class="bi bi-person-hearts"></i>
                    Bem-estar
                </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link fs-5" href="#">
                    <i class="bi bi-bookmark-check"></i>
                    Recomendados
                </i></a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      <i class='bx bxs-filter-alt' ></i>
                      Autores
                    </a>
                    <ul id="containerAuthors" class="dropdown-menu dropdown-menu-dark">
                    </ul>
                  </li>
                </ul>
                <form class="d-flex" role="search">
                  <input class="form-control inputFontColor me-2 bg-dark text-bg-dark" id="searchInput" type="search" placeholder="Procure por autores" aria-label="Search">
                  <button id="searchBtn" class="btn btn-light" type="button">Procurar</button>
                </form>
              </div>
            </div>
          </div>
        </nav>
    </header>

    <div class="container mt-5">
        <div class="backArrow">
            <a href="../"><i class="bi bi-arrow-left-short"></i></a>
        </div>
        <hr>
        <div class="row">
          <div class="col-md-8 offset-md-2">
            <h1 id="titleNew" class="mb-4"></h1>
            <div id="containerImgs2"></div>
            <p class="text-muted"> Por <span class="font-weight-bold"  id="authorNew"></span> em <span id="dateNew"></span></p>
            <p id="leadNew" class="lead"></p>
            <p id="bodyNew"></p>
            <div id="containerImgs"></div>
            <hr>
            <p><strong>Categoria:</strong><span id="categorynew"></span></p>
          </div>
        </div>
      </div>
    </body>
    </html>

    <script type="text/javascript">
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get('idNews')
        const loadJSON = (id) => {
            var newsFound = false;
            var dataNew;
            fetch('news.json')
                .then(response => response.json())
                .then(data => {
                    const newsArray = data.news;
                    for (const news of newsArray) {
                        if (news.id == id) {
                            newsFound = true;
                            dataNew = news;
                        };
                    };
                    if (newsFound == true) {
                        renderNews(dataNew);
                    } else {
                        window.location.href = '../';
                    };
                })
                .catch(error => {
                    console.error('Error fetching JSON:', error);
                });
        };  

        const renderNews = (datas) => {
            $('#titleNew').text(datas.title);
            $('#authorNew').text(datas.author);
            $('#dateNew').text(datas.date);
            $('#leadNew').text(datas.lead);
            $('#bodyNew').text(datas.bodyNew);
            $('#categorynew').text(datas.category);

            datas.imgs2.forEach(element => {
                document.querySelector('#containerImgs').innerHTML += `
                    <img src="images/${element}" class="imageNew">
                `;
            });

            $('#containerImgs2').html(`<img src="images/${datas.imgMain}" class="imageNewMain">`);
        };

        if (id) {
            loadJSON(id);
        } else {
            window.location.href = '../';
        };

    </script>

</body>
</html>