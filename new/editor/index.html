<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>editor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" media="screen" href="../style.css" />
    <script src="../main.js"></script>
    <!--Bootstrap Cdn -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />
    <!-- fontawesome cdn For Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
      integrity="sha512-PgQMlq+nqFLV4ylk1gwUOgm6CtIIXkKwaIHp/PAIWHzig/lKZSEGKEysh0TCVbHJXCLN7WetD8TFecIky75ZfQ=="
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
      integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p"
      crossorigin="anonymous"
    />

    <!--Internal CSS start-->
    <style>
      h1 {
        padding-top: 40px;
        padding-bottom: 40px;
        text-align: center;
        color: #957dad;
        font-family: "Montserrat", sans-serif;
      }

      section {
        padding: 5%;
        padding-top: 0;
      }

      .side {
        margin-left: 0;
      }

      button {
        margin: 10px;
        border-color: #957dad !important;
        color: #888888 !important;
        margin-bottom: 25px;
      }

      button:hover {
        background-color: #fec8d8 !important;
      }

      #textarea1 {
        padding: 3%;
        border-color: #957dad;
        border-width: thick;
      }

      .flex-box {
        display: flex;
        justify-content: center;
      }
    </style>
    <!--Internal CSS End-->
  </head>
  <body>
    <section class="">
      <h1 class="shadow-sm">TEXT EDITOR</h1>
      <div class="flex-box">
        <div class="row">
          <div class="col">
            <button type="button" onclick="f1()" class="shadow-sm btn btn-outline-secondary" data-toggle="tooltip" data-placement="top" title="Bold Text">
              <img src="../format_bold_24dp_FILL0_wght400_GRAD0_opsz24.svg" />
            </button>
            <button
              type="button"
              onclick="f2()"
              class="shadow-sm btn btn-outline-success"
              data-toggle="tooltip"
              data-placement="top"
              title="Italic Text"
            >
              <img src="../format_italic_24dp_FILL0_wght400_GRAD0_opsz24.svg" />
            </button>
            <button
              type="button"
              onclick="f3()"
              class="shadow-sm btn btn-outline-primary"
              data-toggle="tooltip"
              data-placement="top"
              title="Left Align"
            >
              <i class="fas fa-align-left"></i>
            </button>
            <button
              type="button"
              onclick="f4()"
              class="btn shadow-sm btn-outline-secondary"
              data-toggle="tooltip"
              data-placement="top"
              title="Center Align"
            >
              <i class="fas fa-align-center"></i>
            </button>
            <button
              type="button"
              onclick="f5()"
              class="btn shadow-sm btn-outline-primary"
              data-toggle="tooltip"
              data-placement="top"
              title="Right Align"
            >
              <i class="fas fa-align-right"></i>
            </button>
            <button
              type="button"
              onclick="f6()"
              class="btn shadow-sm btn-outline-secondary"
              data-toggle="tooltip"
              data-placement="top"
              title="Uppercase Text"
            >
              Upper Case
            </button>
            <button
              type="button"
              onclick="f7()"
              class="btn shadow-sm btn-outline-primary"
              data-toggle="tooltip"
              data-placement="top"
              title="Lowercase Text"
            >
              Lower Case
            </button>
            <button
              type="button"
              onclick="f8()"
              class="btn shadow-sm btn-outline-primary"
              data-toggle="tooltip"
              data-placement="top"
              title="Capitalize Text"
            >
              Capitalize
            </button>
            <button
              type="button"
              onclick="f9()"
              class="btn shadow-sm btn-outline-primary side"
              data-toggle="tooltip"
              data-placement="top"
              title="Tooltip on top"
            >
              Clear Text
            </button>
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-3 col-sm-3"></div>
        <div class="col-md-6 col-sm-9">
          <input id="headline" type="text" class="input shadow">
          <div
            contenteditable
            id="textarea1"
            class="input shadow"
            name="name"
            rows="15"
            cols="100"
            placeholder="Your text here "
            ></div>
          <form id="forms" method="post" class="flex-box">
            <input type="submit" value="Publish" />
          </form>
        </div>
        <div class="col-md-3"></div>
      </div>
    </section>

    <!--External JavaScript file-->
    <script src="../main.js"></script>
    <script>
      document.getElementById('forms').addEventListener('submit', function(event) {
        event.preventDefault();
        const headline = document.getElementById("headline").value;
        const contentRaw = document.getElementById("textarea1");
    var arrayIH = [];

    if (contentRaw.childElementCount > 0) {
      for (const element of contentRaw.children) {
          arrayIH.push(element.innerHTML);
      }
    }
    else {
      arrayIH.push(contentRaw.innerHTML)
    }
    

    var content = JSON.stringify(arrayIH);

    var xhr = new XMLHttpRequest();
    xhr.open('POST', '../idk.php');
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.send('headline=' + headline + '&content=' + encodeURIComponent(content));
    xhr.onload = function() {
    if (xhr.status === 200) {
        console.log('Dados enviados com sucesso!');
        document.getElementById("headline").value = "";
        window.location.href = "../artigos/" + headline;
    } else {
        console.log('Ocorreu um erro ao enviar os dados.');
    }
    };

    // alert(message);
    });
    </script>
  </body>
</html>
